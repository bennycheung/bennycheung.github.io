---
layout: page
title: Archives
permalink: /archives/
toc: false
---

<div class="archives-container">
  <p class="text-muted">All {{ site.posts | where: "category", "post" | size }} posts, organized by year. Click a year to expand.</p>

  {% assign postsByYear = site.posts | where: "category", "post" | group_by_exp: "post", "post.date | date: '%Y'" %}

  {% for year in postsByYear %}
  <div class="archive-year-group {% if forloop.first %}expanded{% endif %}">
    <h2 class="archive-year-header" onclick="toggleYear(this)">
      <span class="archive-toggle">{% if forloop.first %}▼{% else %}▶{% endif %}</span>
      {{ year.name }} <small class="text-muted">({{ year.items | size }} posts)</small>
    </h2>

    <div class="archive-year-posts" {% unless forloop.first %}style="display: none;"{% endunless %}>
      {% for post in year.items %}
      <div class="media archive-post">
        <a class="media-left" href="{{ post.url }}">
          {% if post.featured and post.images.cover %}
            <!-- Featured posts use images.cover (supports video) -->
            <img src="/{{ post.images.cover }}" class="archive-cover" alt="{{ post.title }}" loading="lazy">
          {% elsif post.image %}
            <!-- Non-featured posts use image: frontmatter -->
            <img src="/{{ post.image }}" class="archive-cover" alt="{{ post.title }}" loading="lazy">
          {% else %}
            <img src="/images/default-cover.jpg" class="archive-cover" alt="{{ post.title }}" loading="lazy">
          {% endif %}
        </a>
        <div class="media-body">
          {% if post.featured %}<span class="label label-primary">Featured</span>{% endif %}
          <p class="archive-date">
            {{ post.date | date: "%B %d, %Y" }}
            {% assign words = post.content | number_of_words %}
            {% assign reading_time = words | divided_by: 200 %}
            {% if reading_time < 1 %}{% assign reading_time = 1 %}{% endif %}
            &bull; {{ reading_time }} min read
          </p>
          <h4 class="media-heading">
            <a href="{{ post.url }}">{{ post.title }}</a>
          </h4>
          <p class="archive-excerpt">{{ post.excerpt | strip_html | truncate: 200 }}</p>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  {% endfor %}
</div>

<script>
function toggleYear(header) {
  const group = header.parentElement;
  const posts = group.querySelector('.archive-year-posts');
  const toggle = header.querySelector('.archive-toggle');

  if (posts.style.display === 'none') {
    posts.style.display = 'block';
    toggle.textContent = '▼';
    group.classList.add('expanded');
  } else {
    posts.style.display = 'none';
    toggle.textContent = '▶';
    group.classList.remove('expanded');
  }
}
</script>
